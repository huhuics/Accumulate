在代码中需要对数据库事务进行控制时，推荐使用**编程式事务**，尽量不要使用`@Transactional`标签进行事务控制，原因如下：
1. 编程式事务能对代码控制更精准，将数据库操作放在事务模板中，其它非数据库操作可以不放在事务模板中，减少数据表行级锁时间
2. `@Transactional`只对public方法有效，对private、protected或者默认可见性的方法无效，且不会抛任务异常，
2. `@Transactional`只有来自外部的方法调用才会被AOP代理捕获，例如，A类有a、b两个方法，b方法使用@Transactional标记，而a方法没有，a再调用b，@Transactional标签失效

出现失效的原因是，@Transactional是通过AOP实现了，即通过代理类实现事务控制，但如果在一个类的内部调用，实质上是通过这个类的this指针来调用方法，而并不会通过代理类去调用，因此失效。解决这个问题可以通过显示的代理对象去调用方法

但如果是这样：A类的a方法使用@Transactional标记，B类的b方法去调用a方法，事务有效。
